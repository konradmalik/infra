- name: install neovim from appimage
  become: yes
  shell:
    chdir: /tmp
    cmd: |
      curl -o nvim.appimage -L https://github.com/neovim/neovim/releases/download/v{{ git_versions.nvim }}/nvim.appimage
      ./nvim.appimage --appimage-extract
      mv ./squashfs-root/usr/bin/nvim /usr/local/bin/nvim
      chmod +x /usr/local/bin/nvim
    creates: /usr/local/bin/nvim
  when: ansible_architecture == "x86_64"

- name: install prettier globally
  become: yes
  community.general.npm:
    name: "{{ item }}"
    global: yes
  with_items:
    - prettier

- name: install shfmt binary
  become: yes
  shell:
    chdir: /tmp
    cmd: |
      curl -o /usr/local/bin/shfmt -L https://github.com/mvdan/sh/releases/download/v{{ git_versions.shfmt }}/shfmt_v{{ git_versions.shfmt }}_linux_{{ arch_map[ansible_architecture] }}
      chmod +x /usr/local/bin/shfmt
    creates: /usr/local/bin/shfmt
