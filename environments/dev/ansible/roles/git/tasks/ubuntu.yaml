- name: install git tools
  become: yes
  apt:
    name:
      - git-extras
      - git-crypt
    state: latest
    update_cache: yes
    autoclean: yes
    autoremove: yes

- name: install 'git-delta' from cargo
  args:
    executable: /bin/bash
  environment:
    PATH: "~/.cargo/bin:{{ ansible_env.PATH }}"
  shell:
    cmd: |
      cargo install --locked git-delta
    creates: ~/.cargo/bin/delta
